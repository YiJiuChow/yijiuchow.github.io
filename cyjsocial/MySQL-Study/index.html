<!DOCTYPE HTML>
<html lang="zh-HK">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="MySQL-Study, Fortune">
    <meta name="description" content="YiJiu Chow&#39;s Social">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <!-- Global site tag (gtag.js) - Google Analytics -->


    <title>MySQL-Study | Fortune</title>
    <link rel="icon" type="image/x-icon, image/vnd.microsoft.icon" href="/favicon.ico">

    <link rel="stylesheet" type="text/css" href="/libs/awesome/css/all.css">
    <link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="/css/matery.css">
    <link rel="stylesheet" type="text/css" href="/css/my.css">

    <script src="/libs/jquery/jquery.min.js"></script>

<meta name="generator" content="Hexo 5.4.0"></head>




<body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/logo.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">Fortune</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>首页</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/tags" class="waves-effect waves-light">
      
      <i class="fas fa-tags" style="zoom: 0.6;"></i>
      
      <span>标签</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/about" class="waves-effect waves-light">
      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>個人資料</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/friends" class="waves-effect waves-light">
      
      <i class="fas fa-smile" style="zoom: 0.6;"></i>
      
      <span>快捷鏈接</span>
    </a>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="搜索" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>


<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">Fortune</div>
        <div class="logo-desc">
            
            YiJiu Chow&#39;s Social
            
        </div>
    </div>

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			首页
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/tags" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-tags"></i>
			
			标签
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/about" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-user-circle"></i>
			
			個人資料
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/friends" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-smile"></i>
			
			快捷鏈接
		</a>
          
        </li>
        
        
    </ul>
</div>


        </div>

        
    </nav>

</header>

    
<script src="/libs/cryptojs/crypto-js.min.js"></script>
<script>
    (function() {
        let pwd = '';
        if (pwd && pwd.length > 0) {
            if (pwd !== CryptoJS.SHA256(prompt('请输入访问本文章的密码')).toString(CryptoJS.enc.Hex)) {
                alert('密码错误，将返回主页！');
                location.href = '/';
            }
        }
    })();
</script>




<div class="bg-cover pd-header post-cover" style="background-image: url('/medias/featureimages/6.jpg')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">MySQL-Study</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
<style>
    #articleContent h1::before,
    #articleContent h2::before,
    #articleContent h3::before,
    #articleContent h4::before,
    #articleContent h5::before,
    #articleContent h6::before {
        display: block;
        content: " ";
        height: 100px;
        margin-top: -100px;
        visibility: hidden;
    }

    #articleContent :focus {
        outline: none;
    }

    .toc-fixed {
        position: fixed;
        top: 64px;
    }

    .toc-widget {
        width: 345px;
        padding-left: 20px;
    }

    .toc-widget .toc-title {
        padding: 35px 0 15px 17px;
        font-size: 1.5rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    .toc-widget ol {
        padding: 0;
        list-style: none;
    }

    #toc-content {
        padding-bottom: 30px;
        overflow: auto;
    }

    #toc-content ol {
        padding-left: 10px;
    }

    #toc-content ol li {
        padding-left: 10px;
    }

    #toc-content .toc-link:hover {
        color: #42b983;
        font-weight: 700;
        text-decoration: underline;
    }

    #toc-content .toc-link::before {
        background-color: transparent;
        max-height: 25px;

        position: absolute;
        right: 23.5vw;
        display: block;
    }

    #toc-content .is-active-link {
        color: #42b983;
    }

    #floating-toc-btn {
        position: fixed;
        right: 15px;
        bottom: 76px;
        padding-top: 15px;
        margin-bottom: 0;
        z-index: 998;
    }

    #floating-toc-btn .btn-floating {
        width: 48px;
        height: 48px;
    }

    #floating-toc-btn .btn-floating i {
        line-height: 48px;
        font-size: 1.4rem;
    }
</style>
<div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/Java/">
                                <span class="chip bg-color">Java</span>
                            </a>
                        
                            <a href="/tags/MySQL/">
                                <span class="chip bg-color">MySQL</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>發布日期:&nbsp;&nbsp;
                    2022-04-16
                </div>
                

                

                

                

                
            </div>
        </div>
        <hr class="clearfix">

        

        

        <div class="card-content article-card-content">
            <div id="articleContent">
                <h3 id="MySQL-语句书写规范"><a href="#MySQL-语句书写规范" class="headerlink" title="MySQL 语句书写规范"></a>MySQL 语句书写规范</h3><ul>
<li>关键字大写，其他内容小写</li>
<li>程序块应采用缩进风格书写，保证代码可读，风格一致，缩进格数统一为4格</li>
<li>代码中需要空位时，统一采用英文空格键输入，不允许用TAB键产生空位</li>
<li>同一条语句占用多行时，每一行的开始应是关键字， 且关键字应和第一行左对齐,如确实不能从关键字分行，则分行处应对其上一行被分行的同类代码的最左边</li>
<li>查询数据时，尽量不使用<code>SELECT *</code>，而是给出明确的字段，但该规则不包括 <code>SELECT COUNT(*)</code> 语 句</li>
<li>INSERT语句应该给出字段列表</li>
<li>从表中同一笔记录中获取记录的字段值，须使用一SQL语句得到，不允许分多条SQL语句</li>
<li>SQL语句中的逗号后面应增加一个空格，以使得代码清晰</li>
<li>不允许将SQL语句写成一行，再短的SQL也应该在谓词处分行</li>
<li>运算符以及比较符左边或者右边只要不是括号，则空一格</li>
<li>不同类型的操作符混合使用时，应使用括号明确的表达运算的先后关系</li>
<li>任何SQL书写单行不得超过120字符（含左边的缩进）</li>
</ul>
<h3 id="MySQL-入门"><a href="#MySQL-入门" class="headerlink" title="MySQL 入门"></a>MySQL 入门</h3><h4 id="MySQL数据库三层结构"><a href="#MySQL数据库三层结构" class="headerlink" title="MySQL数据库三层结构"></a>MySQL数据库三层结构</h4><ol>
<li>安装Mysql数据库, 就是在主机安装一个数据库管理系统 DBMS(database manage system), 这个管理系统可以管理多个数据库</li>
<li>一个数据库中可以创建多个表, 以保存数据(信息)</li>
<li>DBMS (以mysqld.exe为主的程序集) -&gt; 数据库(data中) -&gt; 表 (本质就是文件)</li>
</ol>
<h4 id="SQL语句分类"><a href="#SQL语句分类" class="headerlink" title="SQL语句分类"></a>SQL语句分类</h4><ol>
<li>DDL: 数据定义语句 (create 表, 库…)</li>
<li>DML: 数据操作语句 (增加 insert, 修改 update, 删除 delete…)</li>
<li>DQL: 数据查询语句 (select…)</li>
<li>DCL: 数据控制语句 (管理数据库: 比如用户权限 grand revoke)</li>
</ol>
<h3 id="MySQL-基操"><a href="#MySQL-基操" class="headerlink" title="MySQL 基操"></a>MySQL 基操</h3><h4 id="创建数据库-Create-database"><a href="#创建数据库-Create-database" class="headerlink" title="创建数据库 Create database"></a>创建数据库 Create database</h4><ul>
<li><code>CREATE DATABASE (IF NOT EXISTS) databaseName (CHARSET | CHARACTER SET | CHAR SET utf8 ) (COLLATE utf8_bin/utf8_general_ci)</code></li>
</ul>
<ol>
<li><code>CHARACTER SET</code> 指定数据库采用的字符集, 如果不指定字符集, 默认utf8</li>
<li><code>COLLATE</code> 指定数据库字符集的校对规则常用 <code>utf8_bin</code> (区分大小写) <code>utf8_general_ci</code> (不区分大小写, <strong>默认</strong>)</li>
<li><code>SHOW DATABASES</code> 显示数据库 </li>
<li><code>SHOW CREATE DATABASE db_name</code> 显示数据库创建语句</li>
<li><code>DROP DATABASE (IF EXISTS) db_name</code> 删除数据库</li>
</ol>
<h4 id="备份和恢复数据库-Backup-and-restore-databases"><a href="#备份和恢复数据库-Backup-and-restore-databases" class="headerlink" title="备份和恢复数据库 Backup and restore databases"></a>备份和恢复数据库 Backup and restore databases</h4><ul>
<li>备份数据库<ul>
<li><code>mysqldump -u root -p -B database1 database2 ... &gt; fileName.sql</code></li>
</ul>
</li>
<li>备份数据库的表<ul>
<li><code>mysqldump -u root -p db_name table1 table2 ... &gt; fileName.sql</code></li>
</ul>
</li>
<li>恢复数据库<ul>
<li><code>source fileName.sql</code></li>
</ul>
</li>
</ul>
<h4 id="创建表-Create-table"><a href="#创建表-Create-table" class="headerlink" title="创建表 Create table"></a>创建表 Create table</h4><ul>
<li><code>CREATE TABLE (IF NOT EXISTS) tableName (field datatype, ...) CHARSET utf8 (CHARSET | CHARACTER SET | CHAR SET utf8 ) (COLLATE utf8_bin/utf8_general_ci)(ENGINE ...);</code></li>
</ul>
<ol>
<li>创建表不指定字符集和校对规则, 默认为所在数据库的字符集和校对规则</li>
<li><code>ENGINE</code> 引擎 <code>field</code> 字段/列名 <code>datatype</code> 指定列类型(字段类型) </li>
<li>() 里的都是非必须的</li>
</ol>
<h4 id="表的基本操作"><a href="#表的基本操作" class="headerlink" title="表的基本操作"></a>表的基本操作</h4><ul>
<li>删除表<code>DROP TABLE tableName;</code></li>
<li>查看表的结构 <code>DESC tableName;</code></li>
</ul>
<h4 id="修改表"><a href="#修改表" class="headerlink" title="修改表"></a>修改表</h4><ol>
<li>添加列 <code>AlTER TABLE tableName ADD (field datatype,...) after field;</code></li>
<li>修改列 <code>ALTER TABLE tableName MODIFY (field datatype);</code></li>
<li>删除列 <code>ALTER TABLE tableName DROP (field);</code></li>
<li>修改表的字符集 <code>ALTER TABLE tableName CHARSET utf8;</code></li>
</ol>
<h4 id="常用数据-列-类型"><a href="#常用数据-列-类型" class="headerlink" title="常用数据(列)类型"></a>常用数据(列)类型</h4><ol>
<li>数值类型 (使用规范: 在能够满足需求的情况下,尽量选择占用空间小的类型)<ol>
<li>整型 tinyint(1个字节) smallint(2个字节) mediumint(3个字节) <strong>int(4个字节)</strong> bigint(8个字节)</li>
<li>浮点型 float(单精度 4个字节) <strong>double(双精度 8个字节)</strong></li>
<li>decimal(M, D)大小不确定, 如果D是0, 则没有小数部分,M最大65(默认为10), D最大是30(默认为0)</li>
<li>指定 unsigned 就是无符号数</li>
</ol>
</li>
<li>文本类型(字符串类型)<ol>
<li><strong>char(0 ~ 255) 固定长度字符串</strong> ,最大255字符, 字节数不定, <strong>查询速度快于varchar</strong></li>
<li><strong>varchar(0 ~ 21844) 可变长度字符串, 最大65535字节, 会预留1 ~ 3个字节来记录字符串长度, 所以utf8编码最大存(65535 - 3) / 3 = 21844个字符</strong></li>
<li>text(0 ~ 65535) 和varchar差不多, 根据编码,可存的最大字符长度会变化</li>
<li>longtext(0 ~ 2^32 - 1) </li>
</ol>
</li>
<li>二进制类型(不常用)<ol>
<li>blob 0 ~ 65535</li>
<li>longblob 0 ~ 2^32 -1</li>
</ol>
</li>
<li>时间日期类型<ol>
<li>date YYYY-MM-DD</li>
<li>time HH:mm:ss</li>
<li><strong>datetime YYYY-MM-DD HH:mm:ss</strong></li>
<li><strong>timestamp 时间戳 not null</strong> <code>time TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP</code> 添加行时, 以当前时间填充这个列</li>
<li>year YYYY</li>
</ol>
</li>
<li>位类型(不常用) bit(m) m指定位数, 默认为1, 范围1 ~ 64 按照位的方式显示</li>
</ol>
<h4 id="INSERT"><a href="#INSERT" class="headerlink" title="INSERT"></a>INSERT</h4><ul>
<li><code>INSERT TABLE tableName (column...) VALUES (&#39;&#39;...);</code></li>
</ul>
<ol>
<li>插入的数据应当与字段(列)的数据类型相同 (一些数字可以自动转成字符,和java的规则差不多)</li>
<li>数据的长度应在列的规定范围内</li>
<li>在 <code>VALUES</code> 中列出的数据位置必须与被加入的列的排列位置相对应</li>
<li>字符和日期型数据应包含在单引号中</li>
<li>列可以插入空值(null)(前提是此字段允许为空)</li>
<li>如果是给表中的所有字段添加数据, 可以不写前面的字段名称</li>
<li>如果某个列 没有指定 <code>NOT NULL</code> , 那么当添加数据时,没有给定值,则会默认给 null</li>
</ol>
<h4 id="UPDATE"><a href="#UPDATE" class="headerlink" title="UPDATE"></a>UPDATE</h4><ul>
<li><code>UPDATE tableName SET fieldName = value,... WHERE fieldName = value;</code></li>
</ul>
<ol>
<li><code>WHERE</code> 子句指定应更新哪些行, 如果没有 <code>WHERE</code> 条件, 则会修改表中所有的记录</li>
<li><code>UPDATE</code> 语句可以用新值更新原有表行中的各列</li>
<li><code>SET</code> 子句指示要修改哪些列要给予哪些值</li>
</ol>
<h4 id="DELETE"><a href="#DELETE" class="headerlink" title="DELETE"></a>DELETE</h4><ul>
<li><code>DELETE FROM tablename WHERE fieldName = value;</code></li>
</ul>
<ol>
<li><code>WHERE</code> 子句指定应删除哪些行, 如果没有 <code>WHERE</code> 条件, 则会删除表中所有的记录</li>
<li>DELETE 语句不能删除某一列的值</li>
<li>使用 <code>DELETE</code> 语句仅删除记录, 不删除表本身, 如要删除表, 直接使用<code>DROP TABLE tableName;</code></li>
</ol>
<h4 id="SELECT"><a href="#SELECT" class="headerlink" title="SELECT"></a>SELECT</h4><ul>
<li><code>SELECT (DISTINCT) * / fieldName (AS otherName),... FROM tableName;</code></li>
</ul>
<ol>
<li><code>*</code> 表示表中所有学生的姓名和对应的英语成绩, ()里的内容是非必须的</li>
<li><code>DISTINCT</code> 表示去重, 注意去重, 每个要查询的字段都相同才去重</li>
<li>AS 用于取一个别名</li>
<li>field可以进行运算</li>
</ol>
<h4 id="WHERE"><a href="#WHERE" class="headerlink" title="WHERE"></a>WHERE</h4><ul>
<li>WHERE 子句中常用的运算符</li>
</ul>
<ol>
<li>比较运算符<ol>
<li>&gt; &lt; &lt;= &gt;= = !=(&lt;&gt;也是不等)</li>
<li>BETWEEN…AND… 显示某一<strong>闭区间</strong>的值</li>
<li>IN (set) 显示在in列表中的值</li>
<li>LIKE ‘张%’ 模糊查询</li>
<li>IS NULL 判断为空</li>
</ol>
</li>
<li>逻辑运算符<ol>
<li>and 多个条件同时成立</li>
<li>or 多个条件任一成立</li>
<li>not 不成立</li>
</ol>
</li>
</ol>
<h4 id="ORDER-BY"><a href="#ORDER-BY" class="headerlink" title="ORDER BY"></a>ORDER BY</h4><ul>
<li><code>SELECT... ORDER BY column ASC|DESC,...</code></li>
</ul>
<ol>
<li><code>OEDER BY</code> 指定排序的列, 排序的列既可以是表中的列名, 也可以是 <code>SELECT</code> 后指定的别名</li>
<li><code>ASC</code> 表示升序 <code>DESC</code> 表示降序</li>
<li><code>ORDER BY</code> 子句必须位于 <code>SELECT</code> 语句的结尾</li>
</ol>
<h4 id="合计函数-Aggregate-function"><a href="#合计函数-Aggregate-function" class="headerlink" title="合计函数 Aggregate function"></a>合计函数 Aggregate function</h4><h5 id="COUNT"><a href="#COUNT" class="headerlink" title="COUNT"></a>COUNT</h5><ul>
<li><code>SELECT COUNT(*)|COUNT(列) FROM...</code></li>
</ul>
<ol>
<li>返回/合计/统计行的总数</li>
<li><code>COUNT(*)</code> 返回满足条件的记录的行数 <code>COUNT(列)</code> 返回满足条件的某列有多个, 但是会排除为字段为null的行</li>
</ol>
<h5 id="SUM"><a href="#SUM" class="headerlink" title="SUM"></a>SUM</h5><ul>
<li><code>SELECT SUM(列) FROM.. WHERE...</code></li>
</ul>
<ol>
<li>返回满足 <code>WHERE</code> 条件的行的和(一般使用在数值列), 没有 <code>WHERE</code> 条件, 则返回所有行的和</li>
<li>对非数值型统计没有意义</li>
</ol>
<h5 id="AVG"><a href="#AVG" class="headerlink" title="AVG"></a>AVG</h5><ul>
<li><code>SELECT AVG(列) FROM...</code></li>
<li><code>AVG(列)</code> 返回满足 <code>WHERE</code> 条件的一列的平均值</li>
</ul>
<h5 id="MAX-MIN"><a href="#MAX-MIN" class="headerlink" title="MAX/MIN"></a>MAX/MIN</h5><ul>
<li><code>SELECT MAX(列)|MIN(列) FROM...</code></li>
<li>MAX/MIN 返回满足 <code>WHERE</code> 条件的一列的最大/最下值</li>
</ul>
<h5 id="GROUP-BY-…HAVING-…"><a href="#GROUP-BY-…HAVING-…" class="headerlink" title="GROUP BY …HAVING …"></a>GROUP BY …HAVING …</h5><ul>
<li><code>SELECT ... GROUP BY column HAVING condition.</code></li>
</ul>
<ol>
<li><code>GROUP BY</code> 子句用于对查询的结果分组统计</li>
<li><code>HAVING</code> 子句用于限制/过滤分组显示结果,一般后面接聚合的数据, 放入普通数据比WHERE效率低</li>
</ol>
<h4 id="字符串函数-String-function"><a href="#字符串函数-String-function" class="headerlink" title="字符串函数 String function"></a>字符串函数 String function</h4><ul>
<li><code>charset(str)</code> 返回字串字符集<ul>
<li><code>select charset(ename) from emp;</code></li>
</ul>
</li>
<li><code>concat(str1, str2)</code> 连接字符串<ul>
<li><code>select concat(ename, &#39;\&#39;s job is &#39;, job) from emp;</code></li>
</ul>
</li>
<li><code>instr(substring, string)</code> 返回substring在string中出现的位置,没有返回0</li>
<li>dual 亚元表, 可以做为测试表使用<ul>
<li><code>select instr(&#39;hanshunping&#39;, &#39;ping&#39;) from dual;</code></li>
<li><code>select instr(&#39;JONES&#39;, ename) from emp;</code></li>
</ul>
</li>
<li>ucase 转大写 lcase 转小写<ul>
<li><code>select ucase(empno) from emp;</code></li>
<li><code>select lcase(ename) from emp;</code></li>
</ul>
</li>
<li><code>left(string, length)</code>  从string中左边起取length个字符<ul>
<li><code>select left(&#39;haha&#39;, 2) from dual;</code></li>
<li><code>select left(ename , 2) from emp;</code></li>
</ul>
</li>
<li><code>length(string)</code> string的长度(按照字节计算)<ul>
<li><code>select length(ename) from emp;</code></li>
</ul>
</li>
<li><code>replace(str, search_str, replace_str)</code> 在str中用replace_str替换search_str<ul>
<li><code>select replace(ename,&#39;WA&#39;,&#39;null&#39;) from emp;</code></li>
<li><code>select replace(job, &#39;MANAGER&#39;, &#39;经理&#39;) from emp;</code></li>
</ul>
</li>
<li><code>substring(str, position, [,length])</code> 取str中 position到length的字符串, MySQL中, position = 1 表示第一个字符;<ul>
<li><code>select substring(ename, 1, 2) from emp;</code></li>
</ul>
</li>
<li><code>strcmp(string1, string2)</code> 逐个字符比较两字串大小<ul>
<li><code>select strcmp(ename, job) from emp;</code></li>
</ul>
</li>
<li><code>ltrim(string1) rtrim (string2) trim (string)</code> 去除前端空格或后段空格<ul>
<li><code>select ltrim(&#39; chowyijiu&#39;) from dual;</code></li>
<li><code>select rtrim(&#39;chowyijiu  &#39;) from dual;</code></li>
<li><code>select trim(&#39; chowyijiu  &#39;) from dual;</code></li>
</ul>
</li>
<li>练习: 以首字母小写的方式显示emp表的姓名<ul>
<li><code>select concat(lcase(left(ename,1)) , right(ename, length(ename) - 1)) as new_name from emp;</code></li>
<li><code>select replace(ename, left(ename,1), lcase(left(ename, 1))) as new_name from emp;</code></li>
<li><code>select concat(lcase(substring(ename, 1, 1)), substring(ename,2)) as new_name from emp;</code></li>
<li><code>select concat(lcase(left(ename,1)), substring(ename,2)) as new_name from emp;</code></li>
</ul>
</li>
</ul>
<h4 id="数学函数-Mathematical-function"><a href="#数学函数-Mathematical-function" class="headerlink" title="数学函数 Mathematical function"></a>数学函数 Mathematical function</h4><ul>
<li>ABS(num) 绝对值<br><code>select abs(-10) from dual;</code></li>
<li>BIN(num) 10进制 -&gt; 2进制<br><code>select bin(10) from dual;</code></li>
<li>CEILING(num) 向上取整, 得到比num大的最大整数<br><code>select ceiling(1.1) from dual;</code></li>
<li>conv(num, from_base,to_base) 进制转换<br><code>select conv(8, 10, 2) from dual;</code><br><code>select conv(16, 16, 10) from dual;</code></li>
<li>floor(num) 向下取整, 返回比num小的最大整数<br><code>select floor(1.1) from dual;</code></li>
<li>format(num, decimal_places) 保留小数位数(四舍五入)<br><code>select format(78.123434, 2) from dual;</code></li>
<li>hex(decimalNumber) 转16进制<br><code>select hex(42314) from dual;</code></li>
<li>least(num1, num2, …) 求最小值<br><code>select least(1, 2, 4, 3, 0.1, 7) from dual;</code></li>
<li>mod(numerator, denominator) 求余数<br><code>select mod(10, 3) from dual;</code></li>
<li>rand() 返回随机数<br><code>select rand() from dual;</code></li>
</ul>
<h4 id="时间日期相关函数-Date-function"><a href="#时间日期相关函数-Date-function" class="headerlink" title="时间日期相关函数 Date function"></a>时间日期相关函数 Date function</h4><ul>
<li>current_date() 当前日期</li>
<li>current_time() 当前时间</li>
<li>current_timestamp() 当前时间戳</li>
<li>unix_timestamp() 返回的是1970-01-01到现在的秒数</li>
<li>date_add/date_sub(date, interval num year/month/day)  日期的加减</li>
<li>datediff(date1, date2) 返回两个日期的差(天数)</li>
<li>timediff(time1, time2) 返回两个时间的差(秒数)</li>
<li>last_day(date), 可以返回日期所在月份的最后一天的日期</li>
</ul>
<h4 id="加密函数和系统函数-Encryption-function-and-system-function"><a href="#加密函数和系统函数-Encryption-function-and-system-function" class="headerlink" title="加密函数和系统函数 Encryption function and system function"></a>加密函数和系统函数 Encryption function and system function</h4><ul>
<li>USER() 查询当前用户</li>
<li>DATABASE() 查询当前数据库</li>
<li>MD5(str) 把字符串加密成MD5 32位字符串</li>
<li>PASSWORD(str) 从原文密码str计算并返回密码字符串, 通常用于对mysql数据库的用户密码加密(SELECT * FROM mysql.user查询用户的信息)</li>
</ul>
<h4 id="流程控制函数-Process-control-function"><a href="#流程控制函数-Process-control-function" class="headerlink" title="流程控制函数 Process control function"></a>流程控制函数 Process control function</h4><ul>
<li><code>SELECT if(TRUE,0,1) FROM dual;</code> # 一真大师</li>
<li><code>SELECT IFNULL(null,0) FROM dual;</code></li>
<li><code>SELECT CASE WHEN TRUE THEN 1 WHEN TRUE THEN 2 ELSE 3 END FROM dual;</code> # 相当于java的if-else if-else</li>
</ul>
<h3 id="MySQL-进阶"><a href="#MySQL-进阶" class="headerlink" title="MySQL 进阶"></a>MySQL 进阶</h3><h4 id="查询加强"><a href="#查询加强" class="headerlink" title="查询加强"></a>查询加强</h4><ul>
<li>日期可以直接用来比较</li>
<li>LIKE 的使用 <code>field LIKE &#39;__O%&#39;</code> , <strong><code>%</code> 表示0到多个任意字符</strong>, <strong><code>_</code> 表示单个任意字符</strong> <code>__O%</code>则表示第三位为O的字符串</li>
<li>分页查询 <code>SELECT... limit start, rows;</code> <strong>从start + 1开始,取出rows行, start 从0开始计算, 位于SELECT语句末尾</strong></li>
<li>count() 等括号内可以使用IF等表达式</li>
<li>如果SELECT语句中同时包含有多种子句, 那么的顺序应该是<ul>
<li>where  </li>
<li>group by having</li>
<li>order by </li>
<li>limit</li>
</ul>
</li>
</ul>
<h4 id="多表查询-Multi-table-query"><a href="#多表查询-Multi-table-query" class="headerlink" title="多表查询 Multi-table query"></a>多表查询 Multi-table query</h4><h5 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h5><ol>
<li>笛卡尔集: 查两个表时, 两张表的每一行都会进行组合, 返回记录数则是两张表行数的乘积</li>
<li>所以需要写出正确的过滤条件 WHERE ,HAVING</li>
</ol>
<h5 id="自连接"><a href="#自连接" class="headerlink" title="自连接"></a>自连接</h5><ol>
<li>自连接指的是在同一张表的连接查询(即把一张表看成两张表)</li>
<li>必须把相同的表取别名(as可省略)</li>
</ol>
<h4 id="子查询"><a href="#子查询" class="headerlink" title="子查询"></a>子查询</h4><ol>
<li>子查询: 指嵌入在其他sql语句中的 <code>SELECT</code> 语句, 也叫嵌套查询</li>
<li>单行子查询: 指只返回一行数据的子查询语句</li>
<li>多行自查询: 指返回多行数据的子查询 使用关键字 <code>IN</code></li>
<li>子查询可以当作一个临时表来使用, 但它实际上是并不存在的</li>
<li><code>ANY() </code>:任意一个 () 里可写子查询语句, 在子查询语句中使用 <code>MIN()</code> 有时候也能达到同样的效果</li>
<li><code>ALL()</code> :所有的 () 里可写子查询语句, 在子查询语句中使用 <code>MAX()</code> 有时候也能达到同样的效果</li>
<li>多列子查询: 指查询返回多个列数据的子查询语句</li>
</ol>
<h4 id="表的复制"><a href="#表的复制" class="headerlink" title="表的复制"></a>表的复制</h4><ol>
<li>就是结合 <code>INSERT INTO</code> 和 <code>SELECT</code> 语句</li>
<li>可以实现自我复制(蠕虫复制), 去重复制</li>
</ol>
<h4 id="合并查询"><a href="#合并查询" class="headerlink" title="合并查询"></a>合并查询</h4><ol>
<li>在实际开发中, 为了合并多个SELECT语句的结果</li>
<li>UNION 去重合并</li>
<li>UNION ALL 全部合并(不会去重)</li>
</ol>
<h4 id="MySQL表的外连接"><a href="#MySQL表的外连接" class="headerlink" title="MySQL表的外连接"></a>MySQL表的外连接</h4><ul>
<li><code>... FROM tab1 LEFT/RIGHT JOIN tab2 ON condition;</code></li>
<li>左外连接: 左侧的表完全显示 </li>
<li>右外连接: 右侧的表完全显示</li>
</ul>
<h4 id="约束"><a href="#约束" class="headerlink" title="约束"></a>约束</h4><h5 id="主键-Primary-key"><a href="#主键-Primary-key" class="headerlink" title="主键 Primary key"></a>主键 Primary key</h5><ol>
<li>约束为主键的列, <strong>列值不能重复, 而且不能为null</strong></li>
<li><strong>一张表最多只能有一个主键</strong>, 可以为<strong>复合主键</strong></li>
<li>主键的两种约束方式<ol>
<li><code>fieldname datatype PRIMARY KEY;</code></li>
<li>在字段定义末尾定义<code>...PRIMARY KEY(fieldname);</code></li>
</ol>
</li>
<li><code>DESC tablename;</code> 查看表结构, 可以显示表的约束情况</li>
<li>复合主键里的列, <strong>列值不能同时重复</strong>, 而且<strong>都不能为null</strong></li>
<li>实际开发中, 每个表往往都会设计一个主键</li>
</ol>
<h5 id="非空和唯一-Not-null-and-Unique"><a href="#非空和唯一-Not-null-and-Unique" class="headerlink" title="非空和唯一 Not null and Unique"></a>非空和唯一 Not null and Unique</h5><ol>
<li>如果在列上定义了 not null, 那么当插入数据时, 必须为列提供数据<ul>
<li><code>fieldName datatype not null;</code></li>
</ul>
</li>
<li>当定义唯一(`unique)约束后, <strong>该列值是不能重复的</strong> <ul>
<li><code>fieldName datatype unique;</code></li>
</ul>
</li>
<li><strong>如果没有指定 not null, 则 unique 字段可以有多个 null</strong></li>
<li>一张表可以有<strong>多个</strong> unique 字段</li>
<li><code>unique not null;</code> 使用效果类似于主键</li>
</ol>
<h5 id="外键-Foreign-key"><a href="#外键-Foreign-key" class="headerlink" title="外键 Foreign key"></a>外键 Foreign key</h5><ol>
<li><code>FOREIGN KEY (从表的字段) REFERENCES 主表名(主表字段名);</code> ,字段名必须要用括号包起来</li>
<li>用于定义主表和从表之间的关系, 先有主表, 后有从表</li>
<li>表的引擎或者说是类型<strong>必须是 innodb</strong> </li>
<li><strong>外键</strong>约束要定义在<strong>从表</strong>上</li>
<li><strong>主表</strong>则必须具有<strong>主键约束或是unique约束</strong></li>
<li>外键字段的类型要和主键字段类型一致(长度可以不同)</li>
<li>当定义外键约束后, <strong>要求外键列数据必须在主表的主键列存在,或者为null(前提是外键字段允许为空)</strong></li>
<li>一旦建立主外键的关系, 主表的数据就不能随意修改了</li>
</ol>
<h5 id="check"><a href="#check" class="headerlink" title="check"></a>check</h5><ol>
<li><code>fieldName datatype check condition;</code></li>
<li>用于强制行数据必须满足的条件</li>
<li>mysql5.7 目前还不支持check约束, 只是语法通过, 但不会生效</li>
<li>mysql8.0.16 已完全支持check约束</li>
</ol>
<h4 id="自增长"><a href="#自增长" class="headerlink" title="自增长"></a>自增长</h4><ol>
<li>定义方式 <code>fieldName Integer PRIMARY KEY AUTO_INCREMENT (= StartValue);</code></li>
<li>一般来说自增长和主键 <code>PRIMARY KEY</code> 配合使用 </li>
<li>自增长<strong>默认从 1 开始</strong></li>
<li>可以<strong>单独使用, 但需要搭配 UNIQUE</strong></li>
<li>自增长修饰的字段一般为整数(虽然小数也可以, 但是很少这样使用)</li>
</ol>
<h4 id="索引-Index"><a href="#索引-Index" class="headerlink" title="索引 Index"></a>索引 Index</h4><h5 id="引入索引"><a href="#引入索引" class="headerlink" title="引入索引"></a>引入索引</h5><ol>
<li>说起提高数据库性能, 索引是最物美价廉的东西了, 不用加内存, 不用改程序, 不用调sql, 查询速度就可能提高百倍千倍</li>
<li>索引是针对列创建的, 会占用不少磁盘空间</li>
<li>基本语法 <code>CREATE INDEX indexName ON table (fieldName);</code></li>
</ol>
<h5 id="索引的原理"><a href="#索引的原理" class="headerlink" title="索引的原理"></a>索引的原理</h5><ol>
<li>加索引为什么查询速度会变快<ol>
<li>不加索引查询会进行全表查询</li>
<li>加索引之后, 底层就会形成一个索引的数据结构, 比如二叉树</li>
</ol>
</li>
<li>索引的代价<ol>
<li>磁盘占用</li>
<li>对dml(update delete insert)语句的效率有影响</li>
</ol>
</li>
</ol>
<h5 id="索引的类型"><a href="#索引的类型" class="headerlink" title="索引的类型"></a>索引的类型</h5><ol>
<li>主键索引: 主键 PRIMARY KEY 同时也是索引</li>
<li>唯一索引: 唯一 UNIQUE 同时也是索引</li>
<li>普通索引: INDEX</li>
<li>全文索引: FULLTEXT (MySQL自带的, 一般不使用) Java开发, 使用全文搜索 Solr 和 ElasticSearch(ES) 框架</li>
</ol>
<h5 id="索引的使用"><a href="#索引的使用" class="headerlink" title="索引的使用"></a>索引的使用</h5><ol>
<li>创建/增加索引<ol>
<li><code>CREATE (UNIQUE) INDEX indexName ON tableName (column_name);</code></li>
<li><code>ALTER TABLE tableName ADD (PRIMARY KEY / UNIQUE (INDEX) / INDEX) (column_name);</code></li>
<li>PRIMARY KEY 和 UNIQUE 在创建表的时候声明的同时就创建了索引, 因为它们本身就是索引</li>
</ol>
</li>
<li>删除索引<ol>
<li>删除(唯一/普通)索引<code>DROP INDEX indexName ON tableName (column_name);</code></li>
<li>删除主键索引: <code>ALTER TABLE tableName DROP PRIMARY KEY;</code></li>
</ol>
</li>
<li>修改索引: 先删除索引, 再创建新的索引</li>
<li>查询索引<ol>
<li><code>SHOW INDEX/INDEXES FROM tableName;</code></li>
<li><code>SHOW KEYS FROM tableName;</code></li>
<li><code>DESC tableName;</code></li>
</ol>
</li>
</ol>
<h5 id="索引的选择-什么列适合使用索引"><a href="#索引的选择-什么列适合使用索引" class="headerlink" title="索引的选择, 什么列适合使用索引"></a>索引的选择, 什么列适合使用索引</h5><ol>
<li>如果某列的值不会重复, 就优先考虑UNIQUE 索引, 否则使用普通索引</li>
<li>较频繁的作为查询条件字段应该创建索引</li>
<li>唯一性太差的字段不适合单独创建索引, 即使频繁作为查询条件</li>
<li>更新非常频繁的字段, 不适合创建索引</li>
<li>不会出现在WHERE子句中的字段不该创建索引</li>
</ol>
<h4 id="事务-Transaction"><a href="#事务-Transaction" class="headerlink" title="事务 Transaction"></a>事务 Transaction</h4><h5 id="基本介绍"><a href="#基本介绍" class="headerlink" title="基本介绍"></a>基本介绍</h5><ul>
<li>事务用于保证数据的一致性, 它由一组相关的DML(INSERT, UPDATE, DELETE)语句组成</li>
<li>该组的DML语句要么全部成功, 要么全部失败 (如转账就要用事务来处理, 用以保证数据的一致性)</li>
<li>当执行事务操作时, MySQL 会在表上加锁, 防止其它用户改表的数据, 这对用户来说是非常重要的</li>
</ul>
<h5 id="基本-重要-操作"><a href="#基本-重要-操作" class="headerlink" title="基本(重要)操作"></a>基本(重要)操作</h5><ol>
<li><code>start transaction;</code> or <code>set autocommit = off;</code> 开始一个事务</li>
<li><code>savepoint save_point_name;</code> 设置保存点</li>
<li><code>rollback (to save_point_name);</code> 回退事务, 不接to直接回到事务最初<ol>
<li>保存点(savepoint)是事务中的点, 用于取消部分事务</li>
<li>当结束事务(commit)时, 会自动删除该事务所定义的所有保存点</li>
<li>当执行回退事务时, 通过指定保存点可以回退到指定的点</li>
</ol>
</li>
<li><code>commit</code> 提交事务, 所有的操作生效, 不能回退<ol>
<li>当执行了<code>commit</code>语句后, 会<strong>确认事务的变化, 结束事务, 删除保存点, 释放锁, 数据生效</strong></li>
<li>其他连接将可以查看到变化后的新数据(所有数据正式生效)</li>
</ol>
</li>
</ol>
<h5 id="事务的细节"><a href="#事务的细节" class="headerlink" title="事务的细节"></a>事务的细节</h5><ol>
<li>如果不开始事务, 默认情况下, DML 操作是自动提交的, 不能回滚</li>
<li>如果开始一个事务, 没有创建保存点, 可以执行<code>rollback</code>, 默认就是回滚到你事务开始的状态</li>
<li>可以在这个事务中(还没有提交时), 创建多个保存点, 然后在事务提交前, 选择回退到的保存点, 该保存点后面执行的DML语句或创建的保存点都将失效</li>
<li>InnoDB 存储引擎支持事务, MyISAM 不支持</li>
</ol>
<h5 id="事务隔离级别"><a href="#事务隔离级别" class="headerlink" title="事务隔离级别"></a>事务隔离级别</h5><ol>
<li>多个连接开启各自事务操作数据库中数据时, 数据库系统要负责隔离操作, 以保证各个连接在获取连接时的准确性</li>
<li>隔离级别是跟事务相关的, 没有事务就不要谈隔离级别</li>
<li>如果不考虑隔离性, 可能引发如下问题:<ol>
<li>脏读(dirty read): 当一个事务读取另一个事务尚未提交的修改时, 产生脏读</li>
<li>不可重复读(non-repeatable read): 同一个查询在同一事务中多次进行, 由于其他提交事务所做的<strong>修改(update)或删除(delete)</strong>, 每次返回不同的结果集, 此时发生不可重复读</li>
<li>幻读(phantom read): 同一查询在同一事务中多次进行, 由于其他提交事务所做的<strong>插入(insert)操作</strong>, 每次返回不同的结果集, 此时发生幻读</li>
</ol>
</li>
<li>MySQL隔离级别定义了事务与事务之间的隔离程度</li>
</ol>
<table>
<thead>
<tr>
<th>隔离级别</th>
<th>脏读</th>
<th>不可重复读</th>
<th>幻读</th>
<th>加锁读</th>
</tr>
</thead>
<tbody><tr>
<td>读未提交(Read uncommitted</td>
<td>可能出现</td>
<td>可能出现</td>
<td>可能出现</td>
<td>不加锁</td>
</tr>
<tr>
<td>读已提交(Read committed)</td>
<td>不会出现</td>
<td>可能出现</td>
<td>可能出现</td>
<td>不加锁</td>
</tr>
<tr>
<td>可重复读(Repeatable read)</td>
<td>不会出现</td>
<td>不会出现</td>
<td>不会出现</td>
<td>不加锁</td>
</tr>
<tr>
<td>可串行化(Serializable)</td>
<td>不会出现</td>
<td>不会出现</td>
<td>不会出现</td>
<td>会加锁</td>
</tr>
</tbody></table>
<h5 id="隔离级别相关操作"><a href="#隔离级别相关操作" class="headerlink" title="隔离级别相关操作"></a>隔离级别相关操作</h5><ol>
<li>查看(系统)当前隔离级别, 默认隔离级别是可重复读(Repeatable read)<ol>
<li>MySQL8之后 <code>SELECT @@(global.)transaction_isolation;</code></li>
<li>MySQL8之前 <code>SELECT @@(global.)tx_isolation;</code></li>
</ol>
</li>
<li><code>SET GLOBAL / SESSION TRANSACTION ISOLATION LEVEL 隔离级别;</code> 修改 系统 / 当前 查询编辑器的隔离级别</li>
<li>可以在配置文件my.ini 设置默认的隔离级别 <code>transaction_isolation = 隔离级别</code></li>
</ol>
<h5 id="事务的ACID特性"><a href="#事务的ACID特性" class="headerlink" title="事务的ACID特性"></a>事务的ACID特性</h5><ol>
<li>原子性 Atomicity 事务是一个整体, 事务中的DML操作要么全部发生, 要么都不发生</li>
<li>一致性 Consistency 事务提交会整体改变, 即从一个一致性状态变换到另一个一致性状态</li>
<li>隔离性 Isolation 多个用户的事务操作, 在一定隔离级别下, 不会互相干扰, 多个并发事件相互隔离</li>
<li>持久性 Durability 一旦事务被提交, 它对数据库的改变就是永久性的</li>
</ol>
<h4 id="MySQL表类型和存储引擎-ENGINE"><a href="#MySQL表类型和存储引擎-ENGINE" class="headerlink" title="MySQL表类型和存储引擎 ENGINE"></a>MySQL表类型和存储引擎 ENGINE</h4><h5 id="基本介绍-1"><a href="#基本介绍-1" class="headerlink" title="基本介绍"></a>基本介绍</h5><ol>
<li>MySQL的表类型由存储引擎(Storage Engines)决定, 主要包括MyISAM innoDB Memory等</li>
<li>MySQL数据表主要支持六种类型, 分别是: CSV Memory ARCHIVE MRG MYISAM InnoBDB</li>
</ol>
<h5 id="重要特点"><a href="#重要特点" class="headerlink" title="重要特点"></a>重要特点</h5><table>
<thead>
<tr>
<th align="center">特点</th>
<th align="center">MyISAM</th>
<th align="center">innoDB</th>
<th align="center">Memory</th>
<th align="center">Archive</th>
</tr>
</thead>
<tbody><tr>
<td align="center">批量插入的速度</td>
<td align="center">高</td>
<td align="center">低</td>
<td align="center">高</td>
<td align="center">非常高</td>
</tr>
<tr>
<td align="center">事务</td>
<td align="center"></td>
<td align="center">支持</td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">锁机制</td>
<td align="center">表锁</td>
<td align="center">行锁</td>
<td align="center">表锁</td>
<td align="center">行锁</td>
</tr>
<tr>
<td align="center">外键</td>
<td align="center"></td>
<td align="center">支持</td>
<td align="center"></td>
<td align="center"></td>
</tr>
</tbody></table>
<p>注意: Memory引擎的表数据<strong>存在内存中(关闭了MySQL服务, 数据丢失, 但是表结构还在), 执行速度快(没有IO读写)</strong></p>
<p>修改存储引擎 <code>ALTER TABLE tableName ENGINE = engine_name;</code></p>
<h4 id="视图-View"><a href="#视图-View" class="headerlink" title="视图 View"></a>视图 View</h4><h5 id="基本介绍-2"><a href="#基本介绍-2" class="headerlink" title="基本介绍"></a>基本介绍</h5><ol>
<li>视图是一个<strong>虚拟表, 其内容由查询定义</strong>, 同真实的表一样, 视图包含列, 其<strong>数据来自对应的真实表(基表)</strong></li>
<li>视图可根据<strong>多个</strong>基表或者视图来创建</li>
<li><strong>通过视图可以修改基表的数据, 基表的改变也会影响视图的数据</strong></li>
</ol>
<h5 id="基本使用"><a href="#基本使用" class="headerlink" title="基本使用"></a>基本使用</h5><ul>
<li><code>CREATE VIEW view_name as SELECT...;</code></li>
<li><code>ALTER VIEW view_name as SELECT...;</code></li>
<li><code>SHOW CREATE VIEW view_name;</code></li>
<li><code>DROP VIEW view_name,...</code>;</li>
</ul>
<h5 id="视图的优点"><a href="#视图的优点" class="headerlink" title="视图的优点"></a>视图的优点</h5><ol>
<li>安全: 一些数据表有着重要的信息, 有些字段是保密的, 不能让用户直接看到, 这时就可以使用视图</li>
<li>性能: 关系数据库的数据常常会分表存储， 使用外键建立这些表的连接关系, 这时, 数据库查询通常会用到连接(JOIN), 这样做不仅麻烦, 而且效率也相对比较低</li>
<li>灵活: 如果系统中有一张旧表, 这张表由于设计问题, 即将废弃, 但很多应用都是基于这张表, 不易修改, 这时就可以使用视图减少改动, 也达到了升级数据库的目的</li>
</ol>
<h4 id="MySQL-用户"><a href="#MySQL-用户" class="headerlink" title="MySQL 用户"></a>MySQL 用户</h4><h5 id="操作语句"><a href="#操作语句" class="headerlink" title="操作语句"></a>操作语句</h5><ul>
<li>创建用户 <code>CREATE USER &#39;用户名&#39; @ &#39;允许登陆位置&#39; identified by &#39;密码&#39;;</code> 不同用户, 能操作的库和表不相同</li>
<li>删除用户 <code>DROP USER &#39;用户名&#39; @ &#39;允许登录位置&#39;;</code></li>
<li>修改自己的密码 <code>SET PASSWORD = PASSWORD(&#39;密码&#39;);</code></li>
<li>修改其他用户的密码, 需要对应权限 <code>SET PASSWORD FOR &#39;用户名&#39; @ &#39;登陆位置&#39; = PASSWARD(&#39;密码&#39;)</code></li>
<li>给用户授权 <code>GRANT 权限列表 on 库.对象名 to &#39;用户名&#39; @ &#39;登陆位置&#39; (identified by &#39;密码&#39;)</code><ul>
<li>权限列表, 用逗号隔开, <code>all</code> 代表所有权限</li>
<li><code>*.*</code>  本系统中所有的数据库的所有对象(表, 视图, 存储过程)</li>
<li><code>库.*</code> 某个数据库中的所有数据对象(表, 视图, 存储过程)</li>
<li><code>identified by &#39;密码&#39;</code> 可以省略, 如果用户存在, 就会修改用户的密码, 如果不存在就会创建用户</li>
</ul>
</li>
<li>回收用户权限 <code>REVOKE 权限列表 on 库.对象名 FROM &#39;用户名&#39; @ &#39;登陆位置&#39;</code></li>
<li>低版本MySQL有时候需要刷新权限 <code>FLUSH PRIVILEGES</code></li>
</ul>
<h5 id="细节"><a href="#细节" class="headerlink" title="细节"></a>细节</h5><ol>
<li>在创建用户的时候, <strong>如果不指定 Host, 则为%, %表示所有IP都有连接权限</strong></li>
<li>也可以指定 Host 为 <code>@192.168.1.%</code></li>
<li>在删除用户的时候, 如果host不是 %, 需要明确指定</li>
</ol>

                
            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        文章作者:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="/about" rel="external nofollow noreferrer">YiJiu Chow</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        文章連結:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="https://chowyijiu.social/cyjsocial/MySQL-Study/">https://chowyijiu.social/cyjsocial/MySQL-Study/</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        版權聲明:
                    </i>
                </span>
                <span class="reprint-info">
                    本部落格所有文章除特別聲明外，均採用
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    許可協議。轉載請註明來源
                    <a href="/about" target="_blank">YiJiu Chow</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>複製成功，請遵循本文的轉載規則</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            
                                <a href="/tags/Java/">
                                    <span class="chip bg-color">Java</span>
                                </a>
                            
                                <a href="/tags/MySQL/">
                                    <span class="chip bg-color">MySQL</span>
                                </a>
                            
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">
<div id="article-share">

    

    

</div>

                </div>
            </div>
            
        </div>
    </div>

    

    

    

    

    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fas fa-chevron-left"></i>&nbsp;上一篇</div>
            <div class="card">
                <a href="/cyjsocial/%E8%B4%B0%E6%8B%BE%E4%B8%8D%E6%83%91/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/10.jpg" class="responsive-img" alt="贰拾不惑">
                        
                        <span class="card-title">贰拾不惑</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            贰拾岁开启不惑之旅
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="far fa-clock fa-fw icon-date"></i>2022-04-19
                        </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-user fa-fw"></i>
                            YiJiu Chow
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/%E4%B8%8D%E6%83%91/">
                        <span class="chip bg-color">不惑</span>
                    </a>
                    
                    <a href="/tags/%E4%BA%BA%E7%94%9F/">
                        <span class="chip bg-color">人生</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                下一篇&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/cyjsocial/Docker/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/0.jpg" class="responsive-img" alt="Docker">
                        
                        <span class="card-title">Docker</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            容器技术
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2022-03-15
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-user fa-fw"></i>
                            YiJiu Chow
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/Docker/">
                        <span class="chip bg-color">Docker</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>


<script>
    $('#articleContent').on('copy', function (e) {
        // IE8 or earlier browser is 'undefined'
        if (typeof window.getSelection === 'undefined') return;

        var selection = window.getSelection();
        // if the selection is short let's not annoy our users.
        if (('' + selection).length < Number.parseInt('120')) {
            return;
        }

        // create a div outside of the visible area and fill it with the selected text.
        var bodyElement = document.getElementsByTagName('body')[0];
        var newdiv = document.createElement('div');
        newdiv.style.position = 'absolute';
        newdiv.style.left = '-99999px';
        bodyElement.appendChild(newdiv);
        newdiv.appendChild(selection.getRangeAt(0).cloneContents());

        // we need a <pre> tag workaround.
        // otherwise the text inside "pre" loses all the line breaks!
        if (selection.getRangeAt(0).commonAncestorContainer.nodeName === 'PRE' || selection.getRangeAt(0).commonAncestorContainer.nodeName === 'CODE') {
            newdiv.innerHTML = "<pre>" + newdiv.innerHTML + "</pre>";
        }

        var url = document.location.href;
        newdiv.innerHTML += '<br />'
            + '來源: Fortune<br />'
            + '文章作者: YiJiu Chow<br />'
            + '文章連結: <a href="' + url + '">' + url + '</a><br />'
            + '本文章著作权归作者所有，任何形式的转载都请注明出处。';

        selection.selectAllChildren(newdiv);
        window.setTimeout(function () {bodyElement.removeChild(newdiv);}, 200);
    });
</script>


<!-- 代码块功能依赖 -->
<script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>

<!-- 代码语言 -->

<script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script>


<!-- 代码块复制 -->

<script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>


<!-- 代码块收缩 -->

<script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script>


    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget card" style="background-color: white;">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;目錄</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('0'),
            headingSelector: 'h2, h3, h4'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h2, h3, h4').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>




    <footer class="page-footer bg-color">
    

    <div class="container row center-align"
         style="margin-bottom: 0px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            
                <span id="year">2019-2022</span>
            
            <span id="year">2019</span>
            <a href="/about" target="_blank">YiJiu Chow</a>
            <!-- |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a>
            |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a> -->
            <br>
            
            
            
            
            
            <br>

            <!-- 运行天数提醒. -->
            
            <br>
            
        </div>
        <div class="col s12 m4 l4 social-link ">
    <a href="https://github.com/YiJiuChow" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fab fa-github"></i>
    </a>









    <a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=1942422015" class="tooltipped" target="_blank" data-tooltip="QQ联系我: 1942422015" data-position="top" data-delay="50">
        <i class="fab fa-qq"></i>
    </a>









    <a href="https://t.me/chowyijiu" class="tooltipped" target="_blank" data-tooltip="telegram联系我:chowyijiu" data-position="top" data-delay="50">
        <i class="fab fa-telegram"></i>
    </a>
</div>
    </div>
</footer>

<div class="progress-bar"></div>


    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;搜索</span>
            <input type="search" id="searchInput" name="s" placeholder="請輸入搜索的關鍵字"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script type="text/javascript">
$(function () {
    var searchFunc = function (path, search_id, content_id) {
        'use strict';
        $.ajax({
            url: path,
            dataType: "xml",
            success: function (xmlResponse) {
                // get the contents from search data
                var datas = $("entry", xmlResponse).map(function () {
                    return {
                        title: $("title", this).text(),
                        content: $("content", this).text(),
                        url: $("url", this).text()
                    };
                }).get();
                var $input = document.getElementById(search_id);
                var $resultContent = document.getElementById(content_id);
                $input.addEventListener('input', function () {
                    var str = '<ul class=\"search-result-list\">';
                    var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                    $resultContent.innerHTML = "";
                    if (this.value.trim().length <= 0) {
                        return;
                    }
                    // perform local searching
                    datas.forEach(function (data) {
                        var isMatch = true;
                        var data_title = data.title.trim().toLowerCase();
                        var data_content = data.content.trim().replace(/<[^>]+>/g, "").toLowerCase();
                        var data_url = data.url;
                        data_url = data_url.indexOf('/') === 0 ? data.url : '/' + data_url;
                        var index_title = -1;
                        var index_content = -1;
                        var first_occur = -1;
                        // only match artiles with not empty titles and contents
                        if (data_title !== '' && data_content !== '') {
                            keywords.forEach(function (keyword, i) {
                                index_title = data_title.indexOf(keyword);
                                index_content = data_content.indexOf(keyword);
                                if (index_title < 0 && index_content < 0) {
                                    isMatch = false;
                                } else {
                                    if (index_content < 0) {
                                        index_content = 0;
                                    }
                                    if (i === 0) {
                                        first_occur = index_content;
                                    }
                                }
                            });
                        }
                        // show search results
                        if (isMatch) {
                            str += "<li><a href='" + data_url + "' class='search-result-title'>" + data_title + "</a>";
                            var content = data.content.trim().replace(/<[^>]+>/g, "");
                            if (first_occur >= 0) {
                                // cut out 100 characters
                                var start = first_occur - 20;
                                var end = first_occur + 80;
                                if (start < 0) {
                                    start = 0;
                                }
                                if (start === 0) {
                                    end = 100;
                                }
                                if (end > content.length) {
                                    end = content.length;
                                }
                                var match_content = content.substr(start, end);
                                // highlight all keywords
                                keywords.forEach(function (keyword) {
                                    var regS = new RegExp(keyword, "gi");
                                    match_content = match_content.replace(regS, "<em class=\"search-keyword\">" + keyword + "</em>");
                                });

                                str += "<p class=\"search-result\">" + match_content + "...</p>"
                            }
                            str += "</li>";
                        }
                    });
                    str += "</ul>";
                    $resultContent.innerHTML = str;
                });
            }
        });
    };

    searchFunc('/search.xml', 'searchInput', 'searchResult');
});
</script>

    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script src="/libs/materialize/materialize.min.js"></script>
    <script src="/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="/libs/aos/aos.js"></script>
    <script src="/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="/js/matery.js"></script>

    <!-- Baidu Analytics -->

    <!-- Baidu Push -->

    
    

    

    

    <!--腾讯兔小巢-->
    
    
    <script type="text/javascript" color="0,0,255"
        pointColor="0,0,255" opacity='0.7'
        zIndex="-1" count="99"
        src="/libs/background/canvas-nest.js"></script>
    

    

    

    
    <script src="/libs/instantpage/instantpage.js" type="module"></script>
    

</body>

</html>
